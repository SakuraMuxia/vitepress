import{_ as s,c as i,o as a,a5 as n}from"./chunks/framework.CkGENphA.js";const o=JSON.parse('{"title":"Jenkins","description":"","frontmatter":{},"headers":[],"relativePath":"front-end/javascript/022-jenkins.md","filePath":"front-end/javascript/022-jenkins.md"}'),p={name:"front-end/javascript/022-jenkins.md"},l=n(`<h1 id="jenkins" tabindex="-1">Jenkins <a class="header-anchor" href="#jenkins" aria-label="Permalink to &quot;Jenkins&quot;">​</a></h1><h2 id="持续集成工具" tabindex="-1">持续集成工具 <a class="header-anchor" href="#持续集成工具" aria-label="Permalink to &quot;持续集成工具&quot;">​</a></h2><p><img src="https://imgbed-1303231448.cos.ap-beijing.myqcloud.com/wp-md/image-20240113173407215.png" alt="image-20240113173407215"></p><p>Jenkins 是一个开源提供友好操作界面的持续集成的工具，是由 JAVA 开发而成Jenkins 是一个调度平台，本身不处理任何事情，调用插件来完成所有的工作。</p><p><img src="https://imgbed-1303231448.cos.ap-beijing.myqcloud.com/wp-md/image-20240114185829027.png" alt="image-20240114185829027"></p><p>jenkins能将各种开源的软件集成为一体，从而实现不同功能的调度工作。如下图所示</p><h2 id="jenkins安装" tabindex="-1">Jenkins安装 <a class="header-anchor" href="#jenkins安装" aria-label="Permalink to &quot;Jenkins安装&quot;">​</a></h2><p>官网：jenkins.io</p><p>可以通过配置软件仓库进行安装，也可以通过rpm包安装</p><p>在清华大学源进行下载</p><p><a href="https://mirror.tuna.tsinghua.edu.cn/jenkins/redhat/" target="_blank" rel="noreferrer">https://mirror.tuna.tsinghua.edu.cn/jenkins/redhat/</a></p><p><img src="https://imgbed-1303231448.cos.ap-beijing.myqcloud.com/wp-md/image-20240114191717373.png" alt="image-20240114191717373"></p><h2 id="设置hostname" tabindex="-1">设置hostname <a class="header-anchor" href="#设置hostname" aria-label="Permalink to &quot;设置hostname&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hostnamectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set-hostname</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> jenkins</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 设置IP地址---把99修改为120</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;s#99#120#g&#39;/etc/sysconfig/network-scripts/ifcfg-eth</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 设置IP地址---把99修改为120</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;s#99#120#g&#39;/etc/sysconfig/network-scripts/ifcfg-eth</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span></span></code></pre></div><h2 id="调整系统环境" tabindex="-1">调整系统环境 <a class="header-anchor" href="#调整系统环境" aria-label="Permalink to &quot;调整系统环境&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">调整系统环境</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@jenkins </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# setenforce 0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@jenkins </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# systemctl stop firewalld</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 设置语言，避免后期Jenkins汉化不完整(设置后需要重启服务器)[root@jenkins ~]# </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">localectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set-locale</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> LANG=en_US.UTF-8</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@jenkins </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]#localectl status</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2.2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 安装JDK环境</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@jenkins </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# yum install java-11-openjdk-devel -y</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看版本</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@jenkins </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# java -version</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">openjdk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> version</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;11.0.12 2021-07-20 LTSOpenJDK Runtime Environment 18.9 (build 11.0.2+7-LTS)OpenJDK 64-Bit Server VM 18.9 (build 11.0.12+7-LTs，mixed mode, sharing)</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">2.3 安装jenkins</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[root@jenkins ~]# yum localinstall -y https://mirror.tuna.tsinghua.edu.cn/jenkins/redhat/jenkins-2. 303-1.1.noarch.rpm</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"># 通过本地安装</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">yum localinstall jenkins-2.303-1.1.noarch.rpm</span></span></code></pre></div><h2 id="配置jenkins" tabindex="-1">配置jenkins <a class="header-anchor" href="#配置jenkins" aria-label="Permalink to &quot;配置jenkins&quot;">​</a></h2><p>查看jenkins安装位置</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rpm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -ql</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> jenkins</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/etc/init.d/jenkins</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 启停脚本</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/etc/logrotate.d/jenkins</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 日志切割脚本</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/etc/sysconfig/jenkins</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 配置文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/usr/lib/jenkins</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # rpm包的方式里边还嵌套了一个war包</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/usr/lib/jenkins/jenkins.war#需要启动一个tomcat</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/usr/sbin/rcjenkins#软链接</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/var/cache/jenkins#缓存目录</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/var/lib/jenkins#工作目录</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/var/log/jenkins#缓存目录</span></span></code></pre></div><h3 id="配置文件" tabindex="-1">配置文件 <a class="header-anchor" href="#配置文件" aria-label="Permalink to &quot;配置文件&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/sysconfig/jenkins</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">---修改的配置项---</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">JENKINS_USER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;root&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">JENKINS_PORT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;8080&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">---加入开机自启---</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> jenkins</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">---启动jenkins---</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> jenkins</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">---配置域名---</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">在windows系统修改hosts文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">192.168.52.61</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> jenkins.yuluo.top</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">192.168.52.60</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yuluo.gitlab.top</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">---或者配置内网dns服务---</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">---解锁jenkins---</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">---安装插件---</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">选择插件安装-&gt;无-&gt;使用admin用户密码登陆，并设置密码</span></span></code></pre></div><h3 id="优化jenkins" tabindex="-1">优化jenkins <a class="header-anchor" href="#优化jenkins" aria-label="Permalink to &quot;优化jenkins&quot;">​</a></h3><p>jenkins 系统管理中的插件管理非常重要，因为 jenkins 的工作全部是由插件来完成。但jenkins 插件默认从国外下载，速度会很慢，所以需要在安装插件前将下载地址改为国内的下载地址</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 修改jenkins&quot;下载插件”地址为国内源</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 检测</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;s#https://www.google.com/#https://www.baidu.com/#g&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/lib/jenkins/updates/default.json</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 软件地址</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;s#updates.jenkins.io/download#mirror.tuna.tsinghua.edu.cn/jenkins#g&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/lib/jenkins/updates/default.json</span></span></code></pre></div><p>修改jenkins“插件升级站点“Url地址;</p><p><code>选择 系统管理 --&gt;插件管理--&gt;高级--&gt;升级站点</code></p><p><img src="https://imgbed-1303231448.cos.ap-beijing.myqcloud.com/wp-md/image-20240115141421137.png" alt="image-20240115141421137"></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">https://mirror.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json</span></span></code></pre></div><h3 id="联网安装汉化" tabindex="-1">联网安装汉化 <a class="header-anchor" href="#联网安装汉化" aria-label="Permalink to &quot;联网安装汉化&quot;">​</a></h3><p>在插件管理中有《可更新 可选插件 已安装》日常的插件安装都是在这个界面上完成的。</p><p>安装中文包</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 确保字符集是en US.UTF-8</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@jenkins </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# echo $LANG</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">en</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> US.UTF-8</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 如果不是则需要重启系统</span></span></code></pre></div><p><img src="https://imgbed-1303231448.cos.ap-beijing.myqcloud.com/wp-md/image-20240115151301861.png" alt="image-20240115151301861"></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 在搜索栏中搜索</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chinese</span></span></code></pre></div><h3 id="上传插件安装" tabindex="-1">上传插件安装 <a class="header-anchor" href="#上传插件安装" aria-label="Permalink to &quot;上传插件安装&quot;">​</a></h3><p>通过页面上传一个.hpi文件的方式来安装插件。</p><p>1.在jenkins 官网 <a href="https://plugins.jenkins.io/%E4%B8%8B%E8%BD%BD%E6%8F%92%E4%BB%B6%E3%80%82" target="_blank" rel="noreferrer">https://plugins.jenkins.io/下载插件。</a>(插件是以 .hpi 结尾的)</p><p>2.将下载好的插件通过上传的方式进行安装系统设置-&gt;插件管理-&gt;上传插件</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ----在清华大学源中查找对应的插件plugs，然后下载下来---</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ---然后在&quot;插件管理&quot;&gt; &quot;高级中&quot;&gt; &quot;上传插件&quot;---</span></span></code></pre></div><p><img src="https://imgbed-1303231448.cos.ap-beijing.myqcloud.com/wp-md/image-20240115152758903.png" alt="image-20240115152758903"></p><h3 id="离线安装" tabindex="-1">离线安装 <a class="header-anchor" href="#离线安装" aria-label="Permalink to &quot;离线安装&quot;">​</a></h3><p>将之前jenkins服务器的插件保存下来，然后导入到服务器中，(离线安装)，最后重启 Jenkins</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 插件的目录 /var/lib/jenkins/plugins/进行打包</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> plugins.tar.gz</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 把插件解压到目录中即可</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tar</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> jenkins_plugin.tar.gz</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -C</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/1ib/jenkins/plugins/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chown</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -Rf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> jenkins.jenkins</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/lib/jenkins/plugins/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> jenkins</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># jenkins没有数据库，他的所有数据都是存储在内存中的。</span></span></code></pre></div><h3 id="查看路由" tabindex="-1">查看路由 <a class="header-anchor" href="#查看路由" aria-label="Permalink to &quot;查看路由&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">route</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span></span></code></pre></div><h1 id="jenkins项目" tabindex="-1">Jenkins项目 <a class="header-anchor" href="#jenkins项目" aria-label="Permalink to &quot;Jenkins项目&quot;">​</a></h1><p><strong>新建一个项目</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">新建任务</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1、输入任务名称:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> freestyle--job-demo</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2、选择自由风格的软件项目</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">3、描述:描述该任务的作用</span></span></code></pre></div><p><strong>清除旧的构建</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">丢弃旧的构建:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 构建后的产物，保留多久条件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 保持构建的天数:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 当前项目构建的产物最多保留多少天，条件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 保持构建的最大个数:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 当前项目最多保留多少构建产物，多出的自动删除</span></span></code></pre></div><p><strong>参数化构建</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">参数化构建:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 在执行任务时，可以传递参数</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#参数和shell中的脚本位置参数一致</span></span></code></pre></div><p><img src="https://imgbed-1303231448.cos.ap-beijing.myqcloud.com/wp-md/image-20240118181612173.png" alt="image-20240118181612173"></p><p>在构建这里设置构建步骤</p><p><img src="https://imgbed-1303231448.cos.ap-beijing.myqcloud.com/wp-md/image-20240118181958944.png" alt="image-20240118181958944"></p><p>使用文本参数化构建参数</p><p><img src="https://imgbed-1303231448.cos.ap-beijing.myqcloud.com/wp-md/image-20240119213105303.png" alt="image-20240119213105303"></p><p>构建</p><p><img src="https://imgbed-1303231448.cos.ap-beijing.myqcloud.com/wp-md/image-20240119213202380.png" alt="image-20240119213202380"></p><p>构建--&gt;增加构建步骤--&gt;选择执行 shell命令</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 执行以下命令</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pwd</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;welcome jenkins&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> \${WORKSPACE}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">touch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fileByjenkins</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 构建后所产生的文件会存储在/var/lib/jenkins/workspace/jenkins_projectname目录下</span></span></code></pre></div><h2 id="jenkins集成gitlab" tabindex="-1">Jenkins集成Gitlab <a class="header-anchor" href="#jenkins集成gitlab" aria-label="Permalink to &quot;Jenkins集成Gitlab&quot;">​</a></h2><p>只所以需要jenkins集成gitlab，是因为我们要抓取Gitlab上的代码，为后续发布网站做好准备;由于 jenkins 只是一个调度平台，所有需要安装与git1ab 相关的插件才可完成对应的集成。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 配置jenkins免密到gitlab上</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1、开发通过gitlab创建一个项目，然后进行代码提监控平台代码url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2、创建一个新的</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> freestyle</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 项目，名称为monitor-deploy</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">3、在</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> jenkins</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 中填写</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gitlab</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 项目地址</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">域名需要解析</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">，由于是ssh协议，所以需要添加认证凭据</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">3.1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> jenkins需要访问</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gitlab</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 项目，则需要与。gitlab建立信任</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">首先登陆Jenkins生成一对秘钥</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">3.2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 将</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> jenkins</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 服务器生成的公钥添加上</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gitlab对应的用户</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">3.3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 然后继续操作</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Jenkins，将</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 用户的私钥添加至</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Jenkins</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 服务器上</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">至此就完成了“公钥加密私钥解密”</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">此时</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> jenkins</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 就能正常访问gitlab</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 项目。</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">4、选择对应的凭据，再次检查是否存在报错提示。</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">如果没有点击保存即可。</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">5、最后点击构建，然后查看构建的输出信息是否有错误提示。</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">6、构建成功后，会被下载至</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Jenkins</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 服务器本地/var/lib/jenkins/workspace/Freestyle目录下</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 配置域名解析 编辑host文件</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 在jenkins服务器上安装git</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yum</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> git</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 初始化</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --global</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user.name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;hanser&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --global</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user.email</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;3012976262@qq.com&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --global</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --list</span></span></code></pre></div><p>源码管理git配置</p><p><img src="https://imgbed-1303231448.cos.ap-beijing.myqcloud.com/wp-md/image-20240119222109988.png" alt="image-20240119222109988"></p><p>需要配置jenkins私钥存放的位置</p><p><img src="https://imgbed-1303231448.cos.ap-beijing.myqcloud.com/wp-md/image-20240119222258669.png" alt="image-20240119222258669"></p><p>选择配置</p><p><img src="https://imgbed-1303231448.cos.ap-beijing.myqcloud.com/wp-md/image-20240119222448643.png" alt="image-20240119222448643"></p><p>保存，然后选择构建</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">构建成功后，会被下载至</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Jenkins</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 服务器本地/var/lib/jenkins/workspace/Freestyle目录下</span></span></code></pre></div><h2 id="集成shell部署" tabindex="-1">集成SHELL部署 <a class="header-anchor" href="#集成shell部署" aria-label="Permalink to &quot;集成SHELL部署&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#进入目录</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> \${WORKSPACE} &amp;&amp; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#打包当前文件夹的所有文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -zcf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/src/monitor.tar.gz</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span></span></code></pre></div><p>优化使用环境变量</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"></span></code></pre></div><h2 id="配置免密" tabindex="-1">配置免密 <a class="header-anchor" href="#配置免密" aria-label="Permalink to &quot;配置免密&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh-copy-id</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.ssh/id_rsa.pub</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root@172.16.1.5</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh-copy-id</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.ssh/id_rsa.pub</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root@172.16.1.7</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh-copy-id</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.ssh/id_rsa.pub</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root@172.16.1.8</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh-copy-id</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.ssh/id_rsa.pub</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root@172.16.1.9</span></span></code></pre></div><h2 id="集成ansible" tabindex="-1">集成Ansible <a class="header-anchor" href="#集成ansible" aria-label="Permalink to &quot;集成Ansible&quot;">​</a></h2><p><strong>1 安装Ansible</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yum</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ansible</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span></span></code></pre></div><p><strong>2 配置ssh免密</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh-copy-id</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.ssh/id_rsa.pub</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root@172.16.1.5</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh-copy-id</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.ssh/id_rsa.pub</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root@172.16.1.7</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh-copy-id</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.ssh/id_rsa.pub</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root@172.16.1.8</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh-copy-id</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.ssh/id_rsa.pub</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root@172.16.1.9</span></span></code></pre></div><p><strong>3 配置inventory</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@jenkins </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# cat /etc/ansible/hosts</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[lbservers]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">172.16.1.5</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[webservers]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">172.16.1.7</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">172.16.1.8</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[testservers]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">172.16.1.9</span></span></code></pre></div><p><strong>4 编写测试playbook</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /root/test.yml</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hosts:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;webservers&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  tasks:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	-name:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Test</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> shell</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Command</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	 shell:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	 cmd:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ls</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	 register:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> system_cmd</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	-name:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Debug</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> System</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Command</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	 debug:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">		msg:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;{{ system_cmd }}&quot;</span></span></code></pre></div><p><strong>5 配置Ansible</strong></p><p>1 添加构建步骤，填写playbook路径，填写inventory清单文件路径</p><p><img src="https://imgbed-1303231448.cos.ap-beijing.myqcloud.com/wp-md/image-20240117163141868.png" alt="image-20240117163141868"></p><p>2 定义ansible外置传参方式，传入主机组名称</p><p><img src="https://imgbed-1303231448.cos.ap-beijing.myqcloud.com/wp-md/image-20240117163205192.png" alt="image-20240117163205192"></p><p>3 定义ansible的传参的值，为外置传参的变量名</p><p><img src="https://imgbed-1303231448.cos.ap-beijing.myqcloud.com/wp-md/image-20240117163407191.png" alt="image-20240117163407191"></p><p>4 定义外置传参的变量名称，以及变量值</p><p><img src="https://imgbed-1303231448.cos.ap-beijing.myqcloud.com/wp-md/image-20240117163431156.png" alt="image-20240117163431156"></p>`,96),h=[l];function t(e,k,d,r,g,F){return a(),i("div",null,h)}const y=s(p,[["render",t]]);export{o as __pageData,y as default};
