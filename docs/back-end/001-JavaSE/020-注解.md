# æ³¨è§£åå°„

## æ³¨è§£æ¦‚å¿µ

**æ³¨è§£ä½œç”¨ï¼š**æ³¨è§£ä¸ä¼šç›´æ¥å½±å“ä»£ç é€»è¾‘ï¼Œä½†å¯ä»¥è¢«ç”¨æ¥â€œæ ‡è®°â€æŸäº›ä¿¡æ¯ï¼Œä»è€Œè®©å·¥å…·æˆ–æ¡†æ¶â€œçŸ¥é“â€è¯¥æ€ä¹ˆå¤„ç†è¿™æ®µä»£ç ã€‚**æ³¨è§£å°±åƒâ€œæ ‡ç­¾â€**ï¼šä½ è´´åœ¨ä»£ç çš„ç±»ã€æ–¹æ³•ã€å­—æ®µã€å‚æ•°ä¸Šï¼Œå‘Šè¯‰ç³»ç»Ÿæˆ–å¼€å‘è€…ï¼Œâ€œè¿™æ®µä»£ç æœ‰ä¸ªç‰¹æ®Šçš„ç”¨é€”â€ã€‚`ä¸åŒçš„æ³¨è§£ï¼Œæœ‰ä¸åŒçš„ä½œç”¨ï¼Œå¯ä»¥æ·»åŠ åœ¨ä¸åŒçš„ä½ç½®ï¼Œæœ‰çš„å¯ä»¥å†™å€¼ï¼Œæœ‰çš„ä¸èƒ½å†™å€¼`ã€‚

**JDKæ”¯æŒï¼š**æ³¨è§£æ˜¯JDK1.5æ–°åŠ å…¥çš„å†…å®¹ã€‚

**æ³¨è§£çš„äº§ç”Ÿï¼š**

```java
Java webå¼€å‘å†ç¨‹ï¼šwebé¡¹ç›®ä¸­ä¼šå­˜åœ¨å¤§é‡çš„é…ç½®æ–‡ä»¶ï¼Œä¾‹å¦‚xml yml propertiesæ–‡ä»¶ç­‰ï¼›
é…ç½®æ–‡ä»¶é˜…è¯»æ€§å·®ï¼Œç¼–å†™é”™è¯¯ä¸èƒ½ç«‹å³æç¤ºï¼›é…ç½®æ–‡ä»¶ä¼šå¢åŠ ä»£ç çš„å¤æ‚ç¨‹åº¦ï¼›
    
JDKå¼€å‘äººå‘˜åœ¨1.5å¼•å…¥äº†æ³¨è§£ï¼Œç”¨äºæ¥æ›¿ä»£é…ç½®æ–‡ä»¶ï¼›
    
æ—©æœŸï¼šJavaä»£ç  + é…ç½®æ–‡ä»¶
ç°åœ¨ï¼šJavaä»£ç  + é…ç½®æ–‡ä»¶ + æ³¨è§£
    
æ³¨è§£çš„ä¼˜ç‚¹ï¼šç®€åŒ–å¼€å‘ æé«˜ä»£ç å¯è¯»æ€§;
æ€æƒ³ï¼šçº¦å®šå¤§äºé…ç½®;
```



## å¸¸ç”¨æ³¨è§£

@override

è¯¥æ³¨è§£ç”¨äºæ ‡è¯†ä¸€ä¸ªæ–¹æ³•æ˜¯é‡å†™ï¼ˆOverrideï¼‰çˆ¶ç±»æˆ–æ¥å£ä¸­çš„æ–¹æ³•ã€‚å®ƒèƒ½å¸®åŠ©ç¼–è¯‘å™¨æ£€æŸ¥ä½ æ˜¯å¦çœŸæ­£é‡å†™äº†çˆ¶ç±»çš„æ–¹æ³•ï¼Œé˜²æ­¢æ‹¼å†™é”™è¯¯

```java
class Animal {
    void speak() {
        System.out.println("Animal speaks");
    }
}

class Dog extends Animal {
    @Override
    void speak() {
        System.out.println("Dog barks");
    }
}

```

@FunctionalInterface

ç”¨äºæ ‡æ³¨ä¸€ä¸ªæ¥å£æ˜¯â€œå‡½æ•°å¼æ¥å£â€ï¼ˆåªèƒ½æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼‰ï¼Œå¯ä»¥è¢« Lambda è¡¨è¾¾å¼ä½¿ç”¨ã€‚

```java
@FunctionalInterface
interface MyFunction {
    void execute();  // åªèƒ½æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•
}

// ä½¿ç”¨ Lambda è¡¨è¾¾å¼å®ç°è¯¥æ¥å£
public class Main {
    public static void main(String[] args) {
        MyFunction func = () -> System.out.println("Hello from functional interface!");
        func.execute();
    }
}

```

@SuppressWarnings("unused")

è¯¥æ³¨è§£ç”¨äºå‘Šè¯‰ç¼–è¯‘å™¨å¿½ç•¥ç‰¹å®šçš„è­¦å‘Šä¿¡æ¯ã€‚`"unused"` è¡¨ç¤ºå¿½ç•¥â€œæœªä½¿ç”¨çš„å˜é‡â€è­¦å‘Š

```java
public class Demo {
    // æ³¨è§£å¯ä»¥åŠ åœ¨æ–¹æ³•ä¸Šå’Œå˜é‡ä¸Š
    @SuppressWarnings("unused")
    public void doSomething() {
        String unusedVar = "I won't be used";
        System.out.println("Doing something");
    }
}

```

@Deprecated

æ ‡è®°æŸä¸ªç±»ã€æ–¹æ³•ã€å­—æ®µâ€œä¸å»ºè®®ä½¿ç”¨â€ï¼Œä½†ä»ç„¶å¯ä»¥ç”¨ã€‚æç¤ºå¼€å‘è€…ä½¿ç”¨æ–°ç‰ˆæœ¬

```java
@Deprecated
public void oldMethod() {
    System.out.println("This method is deprecated");
}

public void newMethod() {
    System.out.println("Use this method instead");
}

```

@SuppressWarnings

æŠ‘åˆ¶ç¼–è¯‘å™¨çš„è­¦å‘Šä¿¡æ¯ï¼Œæ¯”å¦‚ â€œuncheckedâ€, â€œdeprecationâ€, â€œunusedâ€ ç­‰

```java
@SuppressWarnings("deprecation")
public void callDeprecated() {
    oldMethod(); // ä¸ä¼šæœ‰è­¦å‘Šäº†
}

```

## å…ƒæ³¨è§£

**å…ƒæ³¨è§£æ˜¯ç”¨äºæ³¨è§£â€œæ³¨è§£â€çš„æ³¨è§£**ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä»¬ç”¨æ¥æè¿°å…¶ä»–æ³¨è§£çš„è¡Œä¸ºå’Œä½œç”¨èŒƒå›´ã€‚

æ¢å¥è¯è¯´ï¼Œå¦‚æœä½ è¦å®šä¹‰ä¸€ä¸ªè‡ªå·±çš„æ³¨è§£ï¼ˆå¦‚ `@MyAnnotation`ï¼‰ï¼Œé‚£ä¹ˆå°±éœ€è¦ç”¨å…ƒæ³¨è§£æ¥å‘Šè¯‰ç¼–è¯‘å™¨

```java
1ã€è¿™ä¸ªæ³¨è§£åº”è¯¥åº”ç”¨åˆ°å“ªé‡Œï¼Ÿ
2ã€å®ƒåº”è¯¥ä¿ç•™åˆ°ä»€ä¹ˆæ—¶å€™ï¼Ÿ
3ã€å®ƒèƒ½å¦è¢«ç»§æ‰¿ï¼Ÿ
4ã€èƒ½å¦é‡å¤ä½¿ç”¨ï¼Ÿ
```

### å¸¸è§å…ƒæ³¨è§£

| æ³¨è§£å        | ä½œç”¨ç®€è¿°                                                 |
| ------------- | -------------------------------------------------------- |
| `@Target`     | æŒ‡å®šæ³¨è§£å¯ä»¥åº”ç”¨åˆ°å“ªäº›ç¨‹åºå…ƒç´ ä¸Šï¼ˆç±»ã€æ–¹æ³•ã€å­—æ®µç­‰ï¼‰     |
| `@Retention`  | æŒ‡å®šæ³¨è§£åœ¨ç”Ÿå‘½å‘¨æœŸä¸­çš„ä¿ç•™ç­–ç•¥ï¼ˆæºç  / ç±»æ–‡ä»¶ / è¿è¡Œæ—¶ï¼‰ |
| `@Documented` | æŒ‡å®šæ³¨è§£æ˜¯å¦ä¼šåŒ…å«åœ¨ Javadoc ä¸­                          |
| `@Inherited`  | æŒ‡å®šæ³¨è§£æ˜¯å¦ä¼šè¢«å­ç±»ç»§æ‰¿                                 |
| `@Repeatable` | å…è®¸ä¸€ä¸ªæ³¨è§£åœ¨åŒä¸€ä½ç½®é‡å¤ä½¿ç”¨ï¼ˆJava 8+ï¼‰                |

### å…ƒæ³¨è§£ç¤ºä¾‹

âœ… 1ã€`@Target`

> é™å®šæ³¨è§£èƒ½ç”¨åœ¨ä»€ä¹ˆä½ç½®ä¸Šï¼Œæ¯”å¦‚ç±»ã€æ–¹æ³•ã€å­—æ®µã€å‚æ•°ç­‰ï¼Œé»˜è®¤ä¸å†™ï¼Œä»£è¡¨å¯ä»¥æ·»åŠ åˆ°ä»»ä½•ä½ç½®ã€‚

```java
@Target({ElementType.METHOD, ElementType.TYPE}) // å†™å¤šä¸ªä½ç½®
public @interface MyAnnotation {}
```

ğŸ“ŒElementTypeå¸¸ç”¨å€¼ï¼š

| æšä¸¾å€¼            | è¯´æ˜           |
| ----------------- | -------------- |
| `TYPE`            | ç±»ã€æ¥å£ã€æšä¸¾ |
| `FIELD`           | æˆå‘˜å˜é‡       |
| `METHOD`          | æ–¹æ³•           |
| `PARAMETER`       | å‚æ•°           |
| `CONSTRUCTOR`     | æ„é€ å‡½æ•°       |
| `LOCAL_VARIABLE`  | å±€éƒ¨å˜é‡       |
| `ANNOTATION_TYPE` | æ³¨è§£ç±»å‹       |
| `PACKAGE`         | åŒ…             |

:zap: æ³¨æ„ï¼šå¦‚æœæ³¨è§£ä¸­åªæœ‰ä¸€ä¸ªå±æ€§å€¼ï¼Œå¹¶ä¸”å±æ€§å€¼ä¸ºvalueï¼Œåˆ™å¯ä»¥ç›´æ¥å†™å€¼ï¼›å…¶ä»–çš„æƒ…å†µéƒ½å¿…é¡»å†™ä¸º `å±æ€§å€¼ = å±æ€§å€¼`å½¢å¼

```java
// @Target Javaæºä»£ç å†…å®¹

@Documented
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.ANNOTATION_TYPE)
public @interface Target {
    /**
     * Returns an array of the kinds of elements an annotation type
     * can be applied to.
     * @return an array of the kinds of elements an annotation type
     * can be applied to
     */
    // æ³¨è§£ä¸­åªæœ‰ä¸€ä¸ªå±æ€§å€¼ï¼Œå¹¶ä¸”å±æ€§å€¼ä¸ºvalue
    ElementType[] value();
}
```

```java
@Target(ElementType.TYPE) // ç›´æ¥å†™å€¼
public @interface A1 {

}
```

âœ… 2ã€`@Retention`

> æŒ‡å®šæ³¨è§£çš„**ä¿ç•™ç­–ç•¥**ï¼Œå³å®ƒåœ¨ä»€ä¹ˆæ—¶å€™å¯¹ç¨‹åºå¯è§ã€‚

```java
@Retention(RetentionPolicy.RUNTIME)
public @interface MyAnnotation {
}
```

ğŸ“ŒRetentionå¸¸ç”¨å€¼ï¼š

| æšä¸¾å€¼          | è¯´æ˜                                               |
| --------------- | -------------------------------------------------- |
| `SOURCE`        | æ³¨è§£åªåœ¨æºç ä¸­å­˜åœ¨ï¼Œç¼–è¯‘åè¢«ä¸¢å¼ƒï¼ˆå¦‚ `@Override`ï¼‰ |
| `CLASS`ï¼ˆé»˜è®¤ï¼‰ | ç¼–è¯‘åˆ° class æ–‡ä»¶ä¸­ï¼Œè¿è¡Œæ—¶ä¸å¯è®¿é—®                |
| `RUNTIME`       | ç¼–è¯‘è¿› classï¼Œè¿è¡Œæ—¶å¯é€šè¿‡åå°„è¯»å–ï¼ˆæ¡†æ¶å¸¸ç”¨ï¼‰     |

âœ… 3. `@Documented`

> æŒ‡å®šæ³¨è§£æ˜¯å¦å‡ºç°åœ¨ Javadoc ä¸­ã€‚

```java
@Documented
public @interface MyAnnotation {
}

```

é»˜è®¤æƒ…å†µä¸‹ï¼Œè‡ªå®šä¹‰æ³¨è§£ä¸ä¼šå‡ºç°åœ¨ Javadoc ä¸­ï¼Œé™¤éåŠ äº† `@Documented`ã€‚

:white_check_mark: 4ã€`@Inherited`

> æŒ‡å®šä¸€ä¸ªæ³¨è§£æ˜¯å¦èƒ½è¢«å­ç±»ç»§æ‰¿ï¼ˆä»…å¯¹ç±»æœ‰æ•ˆï¼‰ã€‚

```java
@Inherited
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
public @interface Role {
    String value();
}

```

```java
@Role("admin")
class Parent {}

class Child extends Parent {} // Child ä¹Ÿå…·æœ‰ @Role æ³¨è§£

```

 æ³¨æ„ï¼šåªèƒ½**ç”¨äºç±»**ï¼ˆ`ElementType.TYPE`ï¼‰ï¼Œä¸èƒ½ç”¨äºæ–¹æ³•ã€å­—æ®µç­‰ã€‚

âœ… 5 ã€`@Repeatable`ï¼ˆJava 8+ï¼‰

> å…è®¸ä¸€ä¸ªæ³¨è§£åœ¨åŒä¸€ä¸ªä½ç½®**é‡å¤ä½¿ç”¨**ã€‚

```java
@Repeatable(Hints.class)
@interface Hint {
    String value();
}

@interface Hints {
    Hint[] value();
}
```

```java
@Hint("hint1")
@Hint("hint2")
public class Person {
}
```

âœ… ç¤ºä¾‹ï¼šè‡ªå®šä¹‰æ³¨è§£ç»“åˆå…ƒæ³¨è§£ä½¿ç”¨

æ–°å»ºæ³¨è§£æ­¥éª¤ï¼šé¼ æ ‡å³é”®ï¼Œæ–°å»ºJavaClassï¼Œé€‰æ‹©Annotationã€‚

```java
import java.lang.annotation.*;

@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
@Documented
public @interface LogExecution {
    String value() default "default";
}

```

## è‡ªå®šä¹‰æ³¨è§£

æ³¨è§£ä¹Ÿæ˜¯ä¸€ç§ç±»å‹ã€‚

:white_check_mark: 1ã€åˆ›å»ºå…ƒæ³¨è§£

```java

```

:white_check_mark: 2ã€ä½¿ç”¨æ³¨è§£

```java

```

## æ³¨è§£å±æ€§



## åº”ç”¨åœºæ™¯

| åœºæ™¯                | ç¤ºä¾‹æ³¨è§£                                      |
| ------------------- | --------------------------------------------- |
| ç¼–è¯‘æ ¡éªŒ            | `@Override`, `@FunctionalInterface`           |
| å¼€å‘å·¥å…·æç¤º        | `@Deprecated`, `@SuppressWarnings`            |
| Java EE/Spring æ¡†æ¶ | `@Component`, `@Autowired`, `@RequestMapping` |
| æµ‹è¯•æ¡†æ¶            | `@Test`, `@Before`, `@After`                  |
| ORM æ˜ å°„            | `@Entity`, `@Table`, `@Column`                |
| è‡ªå®šä¹‰é€»è¾‘ï¼ˆåå°„ï¼‰  | è‡ªå®šä¹‰æ³¨è§£ + `@Retention(RUNTIME)`            |